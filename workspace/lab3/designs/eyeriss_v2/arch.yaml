architecture:
  version: 0.4
  nodes:
    - !Container
      name: system_arch
      attributes:
        technology: "45nm"
        global_cycle_seconds: 1e-9
        datawidth: 16

    - !Component
      name: DRAM
      class: DRAM
      attributes:
        width: 64
        datawidth: datawidth

    - !Container
      name: chip

    - !Component
      name: global_buffer
      class: SRAM
      attributes:
        width: 256
        depth: 4096
        datawidth: datawidth
        n_banks: 2
        n_rdwr_ports: 4

    - !Container
      name: cluster
      spatial: {meshX: 2, meshY: 2}

    - !Container
      name: PE_array
      spatial: {meshX: 4, meshY: 4}

    - !Component
      name: scratchpad
      class: smart_storage
      attributes:
        depth: 256
        width: 16
        datawidth: datawidth
        n_banks: 2
        n_rdwr_ports: 2

    - !Component
      name: weight_reg
      class: reg_storage
      attributes:
        depth: 1
        width: 16
        datawidth: datawidth

    - !Component
      name: input_activation_reg
      class: reg_storage
      attributes:
        depth: 1
        width: 16
        datawidth: datawidth

    - !Component
      name: output_activation_reg
      class: reg_storage
      attributes:
        depth: 1
        width: 16
        datawidth: datawidth

    - !Component
      name: metadata_buffer
      class: reg_storage
      attributes:
        depth: 32
        width: 16
        datawidth: datawidth

    - !Component
      name: mac
      class: mac_compute
      attributes:
        datawidth: datawidth
        num_pipeline_stages: 3